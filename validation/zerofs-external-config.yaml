apiVersion: v1
kind: ConfigMap
metadata:
  name: zerofs-external-config
  namespace: zerofs
data:
  awsAllowHTTP: "false"
  awsCredentialsSecretName: halceon-s3-credentials
  awsDefaultRegion: us-east-1
  awsEndpoint: https://s3.example.com
  storageURL: s3://your-bucket
  encryptionPasswordSecretName: zerofs-encryption-password
  cacheDiskSizeGB: "1.0"
  cacheMemorySizeGB: "0.5"
  zerofsImage: "ghcr.io/barre/zerofs:0.22.4"
  lsmL0MaxSsts: "16"
  lsmMaxUnflushedGB: "0.1"
  filesystemMaxSizeGB: "10.0"
  podReadyTimeoutSeconds: "120"
---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: zerofs-external
provisioner: zerofs.csi.driver
parameters:
  filesystem: btrfs
  configMapName: zerofs-external-config
  deleteDataOnPVCDelete: "false"
mountOptions:
  - compress-force=zstd
